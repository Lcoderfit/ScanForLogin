{{template "base.html" .}}
{{define "content"}}
<div style="text-align: center; padding-top: 80px; margin-bottom: 160px;">
    <img alt="qrcode" src="data:image/png;base64,{{ .base64Qrcode }}"/>
    <div style="font-size: 20px; color:#ffffff; margin-top: 8px;">扫描二维码完成登录</div>
</div>
<script type="text/javascript">
    function getCookie(name) {
        var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
        return r ? r[1] : undefined;
    }
    function ajax() {
        var args = {"_xsrf": getCookie("_xsrf")};
        $.ajax({
            url: "",
            type: "POST",
            data: $.param(args),
            success: function (response) {
                if (response == 'ok') {
                    window.location.href = '/hello'
                }
            }
        })
    }
    $(function () {
            ajax()
        }
    )
</script>
{{end}}